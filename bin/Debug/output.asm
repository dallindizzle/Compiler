ZERO .INT 0
ONE .INT 1
A0 .INT 1
A1 .INT 0
A2 .INT -99
N5 .INT 4
N7 .INT 3
N8 .INT 2
N10 .INT 1
N13 .INT 5
H14 .BYT 'd'
LDR R0 A2
MOV R1 FP
MOV FP SP
ADI SP -4
STR R1 SP
ADI SP -4
STR R0 SP
ADI SP -4
MOV R0 PC
ADI R0 36
STR R0 FP
JMP F3
TRP 0
F3 ADI SP -24
MOV R0 FP
ADI R0 -12
LDR R1 N5
STR R1 R0
MOV R0 FP
ADI R0 -16
LDR R1 N7
STR R1 R0
MOV R0 FP
ADI R0 -12
LDR R1 R0
MOV R2 FP
ADI R2 -16
LDR R3 R2
CMP R1 R3
BLT R1 L1
LDR R4 ZERO
MOV R5 FP
ADI R5 -20
STR R4 R5
JMP L2
L1 LDR R4 ONE
MOV R6 FP
ADI R6 -20
STR R4 R6
L2 MOV R0 FP
ADI R0 -20
LDR R1 R0
BRZ R1 SKIPIF1
MOV R0 FP
ADI R0 -12
LDR R1 R0
LDR R2 N8
CMP R1 R2
BGT R1 L3
LDR R3 ZERO
MOV R4 FP
ADI R4 -24
STR R3 R4
JMP L4
L3 LDR R3 ONE
MOV R5 FP
ADI R5 -24
STR R3 R5
L4 MOV R0 FP
ADI R0 -24
LDR R1 R0
BRZ R1 SKIPIF2
LDR R0 N8
MOV R3 R0
TRP 1
JMP SKIPIF1
SKIPIF2 LDR R0 N10
MOV R3 R0
TRP 1
JMP SKIPELSE4
SKIPIF1 MOV R0 FP
ADI R0 -12
LDR R1 R0
MOV R2 FP
ADI R2 -16
LDR R3 R2
CMP R1 R3
BGT R1 L5
LDR R4 ZERO
MOV R5 FP
ADI R5 -28
STR R4 R5
JMP L6
L5 LDR R4 ONE
MOV R6 FP
ADI R6 -28
STR R4 R6
L6 MOV R0 FP
ADI R0 -28
LDR R1 R0
BRZ R1 SKIPIF5
MOV R0 FP
ADI R0 -16
LDR R1 R0
LDR R2 N8
CMP R1 R2
BGT R1 L7
LDR R3 ZERO
MOV R4 FP
ADI R4 -32
STR R3 R4
JMP L8
L7 LDR R3 ONE
MOV R5 FP
ADI R5 -32
STR R3 R5
L8 MOV R0 FP
ADI R0 -32
LDR R1 R0
BRZ R1 SKIPIF6
LDR R0 N5
MOV R3 R0
TRP 1
JMP SKIPIF5
SKIPIF6 LDR R0 N13
MOV R3 R0
TRP 1
JMP SKIPELSE4
SKIPIF5 LDB R0 H14
MOV R3 R0
TRP 3
SKIPELSE4 MOV SP FP
LDR R0 FP
MOV R1 FP
ADI R1 -4
LDR FP R1
JMR R0
